<!-- 
Generated by LectureQ
Date: 2025-08-09 23:59:32
Model: qwen3:30b
-->

<think>
I'll create comprehensive lecture notes for a student who missed class on Week 2, Lecture 2 of "Secure Programming" based on the provided slides and transcript. I need to synthesize everything into natural, flowing educational notes that would allow a student to learn all necessary information from these notes alone.

Let me plan out how to structure this:

1. Start with clear title including week/lecture info
2. Add an Overview section immediately after title
3. Organize content using hierarchical headers (# ## ###)
4. Include Key Insights from Transcript in the specified format
5. Synthesize information rather than just listing slides
6. Use proper formatting for important terms, examples, etc.
7. End with a Summary/Key Takeaways

Let me go through each section of the lecture and synthesize it:

**Week 2: Lecture 2 - Designing for Security & Threat Modeling**

First, I'll create an engaging title that captures the essence of the lecture.

Then I'll write an overview summarizing what was covered in this lecture.

Now let's break down the content by topic:

1. **Course Logistics and Assessment Information** (Slides 3-5)
2. **Threat Modeling Fundamentals** (Slides 6-18, transcript discussion)
   - Threat modeling process
   - STRIDE methodology
   - Data Flow Diagrams
   - Attack Trees
   - MITRE ATT&CK framework
3. **Security Principles and OWASP Top 10** (Slides 24-37, transcript discussion)
   - Kerckhoff's Principle
   - OWASP Top 10 vulnerabilities
4. **Input Sanitization & Authentication Vulnerabilities** (Slides 38-73, transcript discussion)
   - Injection attacks
   - SQL injection example
   - Cross-Site Scripting (XSS)
   - Cross-Site Request Forgery (CSRF)

I'll make sure to synthesize the information from both slides and transcript, rephrasing for clarity while preserving all important concepts.

Let me now create these notes in markdown format following all the requirements.
</think>

# Week 2: Lecture 2 - Designing for Security & Threat Modeling  

## Overview  
This lecture covers foundational security concepts including threat modeling methodologies, key cybersecurity principles, OWASP Top 10 vulnerabilities, and practical examples of input sanitization failures. We'll explore how to identify threats early in the development lifecycle through structured approaches like STRIDE methodology and data flow diagrams, while also examining common vulnerability patterns that lead to security breaches.

---

## Course Logistics & Assessment Details  

### Final Exam Requirements  
- **Closed-book exam** with a *hurdle requirement* of at least 40% (must be achieved regardless of other scores)  
- Allowed items:  
  - One double-sided A4 page of handwritten/printed notes (no digital copies allowed)  
  - Basic four-function calculator without alphanumeric memory  

> **Key Insight from Transcript**  
> > "Don't focus on memorizing the sample exam. The questions will be different, but it gives you a sense of question types—multiple choice, fill-in-the-blank, and essay-style questions. Focus on understanding concepts rather than specific examples."

### RangeForce Assessment (30% of grade)  
| Cohort | Part 1 | Part 2 | Challenges |
|--------|--------|--------|------------|
| Undergrad (3307) | 15 pts | 15 pts | Not applicable |
| Postgrad (7307) | 10 pts | 10 pts | 10 pts |

- **Access**: Invitation link available for 7 days; platform access lasts 6 weeks (start immediately!)  
- **Completion Requirements**:
  - Undergrad/Postgrad: Complete ≥70 of 79 modules in Parts 1 & 2
  - Postgrad only: Complete ≥5 of 9 Challenges modules

> **Key Insight from Transcript**  
> > "RangeForce is both a learning platform and assessment tool. Don't worry about completing all modules—focus on the core content. The challenges are optional for undergrads but require independent problem-solving."

### Group Project Timeline  
- **Group formation deadline**: End of this week (119 students still unassigned)  
- **Secure communication protocol design**: Share with peers to reach consensus before next lecture  

> **Key Insight from Transcript**  
> > "Ethical hacking is critical—always use virtual machines or sandboxes. Never test systems without explicit permission, as it may be illegal in your jurisdiction."

---

## Threat Modeling Fundamentals  

### What Is a Threat?  
A *threat* is an event that could negatively impact systems, data, or operations. The goal of threat modeling is to identify these threats **early**—before any code is written—to prevent costly fixes later.

> **Key Insight from Transcript**  
> > "Security isn't just about writing secure code—it starts in the requirements phase. If you don't address security early, fixing it later can cost up to 100x more."

### CIA Triad: Core Security Principles  
| Principle | Definition | Example |
|-----------|------------|---------|
| **Confidentiality** | Data is accessible only to authorized users | Passwords not exposed in logs |
| **Integrity** | Data remains unaltered by unauthorized parties | Preventing tampering with financial records |
| **Availability** | Systems are operational when needed | DDoS protection for critical services |

### Threat Modeling Process  
1. Identify assets (what needs protection)  
2. Map data flows using *Data Flow Diagrams* (DFDs)  
3. Apply threat modeling frameworks to identify vulnerabilities  
4. Prioritize risks based on impact and likelihood  

---

## STRIDE Methodology: A Practical Framework  

STRIDE is a mnemonic framework developed by Microsoft for identifying threats in software design:

| STRIDE Element | Security Property | Description |
|----------------|-------------------|-------------|
| **Spoofing** | Authentication | Identity verification (e.g., login systems) |
| **Tampering** | Integrity | Unauthorized data modification (e.g., changing order amounts) |
| **Repudiation** | Nonrepudiation | Inability to deny actions (e.g., digital signatures) |
| **Information Disclosure** | Confidentiality | Unintended data exposure (e.g., password leaks) |
| **Denial of Service** | Availability | System unavailability (e.g., DDoS attacks) |
| **Elevation of Privilege** | Authorization | Unauthorized access to higher privileges |

> **Key Insight from Transcript**  
> > "Authentication verifies *who* you are; authorization determines *what you can do*. A system with perfect authentication but poor authorization is still vulnerable."

### Data Flow Diagram (DFD) Basics  
DFDs visually represent how data moves through a system. Key rules:
- Entities (users, systems) must connect to processes via directional arrows
- Processes require at least one input and output
- Use domain-specific names for clarity

**DFD Construction Steps**:  
1. **Context Diagram (Level 0)**: Identify all external entities and the main system process  
2. **System Breakdown (Level 1+)**: Decompose complex processes into sub-processes  
3. **Data Stores**: Identify databases or storage systems  

> **Example from Transcript**  
> > "For a library system, external entities include users and librarians. The main system is the website. Breaking it down reveals login processing as a key sub-process."

---

## Attack Trees: Thinking Like an Attacker  

Attack trees model threats from the *attacker's perspective* using decision tree structures:

| Component | Description |
|-----------|-------------|
| **Root Node** | Primary attack goal (e.g., "Steal user data") |
| **Intermediate Nodes** | Steps to achieve the root goal |
| **Leaf Nodes** | Specific actions or capabilities required |

> **Key Insight from Transcript**  
> > "Attack trees help estimate attacker capability requirements. For example, cutting open a safe requires tools and strength—costing more than stealing written combination."

### MITRE ATT&CK Framework  
A globally recognized knowledge base of adversary tactics and techniques:

- **Tactics**: High-level attack goals (e.g., Initial Access, Execution)  
- **Techniques**: Specific methods to achieve tactics (e.g., Phishing for initial access)  

> **Key Insight from Transcript**  
> > "MITRE ATT&CK is invaluable for threat modeling. It captures real-world attacks so you can proactively defend against them."

---

## Kerckhoff's Principle: The Foundation of Secure Design  

> **"A cryptosystem should remain secure even if the attacker knows all internal details except the secret key."**  
> — *Kerckhoff's Principle*

This principle rejects "security through obscurity"—never assume attackers don't know your system design. Instead, focus on protecting only what must be kept secret: **the key**.

> **Key Insight from Transcript**  
> > "Hardcoded secrets in code (like passwords) are a major vulnerability. Always use secure key management systems."

---

## OWASP Top 10: Critical Web Vulnerabilities  

The OWASP Top 10 lists the most critical web application security risks (2021 update):

| # | Risk Category | Key Insight |
|---|---------------|-------------|
| **A01** | Broken Access Control | *Failure to enforce permissions* → Users access admin features they shouldn't. |
| **A02** | Cryptographic Failures | *Unencrypted data in transit/at rest* → Passwords stored as plaintext. |
| **A03** | Injection | *User input not validated* → SQLi, command injection (e.g., `'; DROP TABLE users;--`). |
| **A04** | Insecure Design | *Flaws in architecture* → Cost 100x more to fix later than during design. |
| **A05** | Security Misconfiguration | *Default settings or unnecessary features enabled* → Exposed admin panels. |
| **A06** | Vulnerable Components | *Outdated libraries* → Major cause of breaches (e.g., Log4j vulnerability). |
| **A07** | Identification & Authentication Failures | *Weak passwords, no MFA* → Credential stuffing attacks. |
| **A08** | Software/Data Integrity Failures | *Unverified updates* → Malicious software in supply chain. |
| **A09** | Security Logging/Monitoring Failures | *No logs for breaches* → Inability to detect incidents quickly. |
| **A10** | Server-Side Request Forgery (SSRF) | *Attacker forces server to access internal systems* → Data exfiltration. |

> **Key Insight from Transcript**  
> > "Insecure design is the costliest flaw—fix it early or pay 100x later. Threat modeling helps catch these during requirements."

---

## Input Sanitization & Authentication Vulnerabilities  

### Injection Attacks: The Core Problem  
*Injection flaws occur when untrusted data is sent to an interpreter (e.g., SQL, OS commands).*

#### Example: Command Injection
```php
$t = $_REQUEST['ip'];
$o = shell_exec('ping -C 3 ' . $t); // Vulnerable!
echo $o;
```

**Attack**:  
`127.0.0.1; ls` → Executes `ping -C 3 127.0.0.1; ls`  
→ **Result**: Lists directory contents (unauthorized access)

> **Key Insight from Transcript**  
> > "Always validate and sanitize user input. Never trust it—assume attackers will try to break your system."

#### SQL Injection: A Classic Case
```php
$id = $_GET['id'];
$getid = "SELECT * FROM users WHERE user_id = $id";
```

**Attack**: `1 OR 1=1;--` → Returns all rows from the database

| Attack | Result |
|--------|--------|
| `1' OR '1'='1` | Bypasses authentication |
| `1'; DROP TABLE users;--` | Deletes entire user table |

> **Key Insight from Transcript**  
> > "Prepared statements (separating data from queries) prevent SQLi. Never concatenate user input directly into queries."

---

### Cross-Site Scripting (XSS)  

#### Types of XSS:
| Type | Description | Example |
|------|-------------|---------|
| **Reflected (Non-Persistent)** | Malicious script reflected in URL → executed immediately | `http://example.com/search?q=<script>alert(1)</script>` |
| **Stored (Persistent)** | Malicious script stored on server → executes for all users viewing content | Forum comment with embedded `<script>...</script>` |

**Impact**: Steal cookies, redirect to phishing sites, deface websites.

---

### Cross-Site Request Forgery (CSRF)  

#### How It Works:
1. User logs into bank.com  
2. Attacker tricks user into clicking malicious link:  
   `http://bank.com/transfer?amount=1000&dest=attacker`  
3. Browser sends session cookie → server processes transfer

**Key Difference from XSS**:  
- CSRF requires *user interaction* (clicking a link)  
- Requires *active session* with target site  

> **Key Insight from Transcript**  
> > "CSRF is like tricking someone into signing a document they didn't read. The bank assumes you're acting intentionally."

---

## Summary & Key Takeaways  

### Core Principles to Remember
1. **Threat modeling starts early**: Identify threats *before* coding (use STRIDE/DFDs)  
2. **Never trust user input**: Sanitize all inputs; use prepared statements for SQL  
3. **Authentication ≠ Authorization**: Verify identity *and* permissions  
4. **Kerckhoff's Principle**: Assume attackers know your system—protect only the key  
5. **OWASP Top 10 is essential**: Focus on A01 (access control), A03 (injection), and A06 (vulnerable components)  

### Critical Actions for Students
- Start RangeForce *immediately* (7-day access window)
- Review OWASP Top 10 categories before next lecture
- Practice threat modeling using STRIDE on a simple app (e.g., library system)
- **Never** test systems without permission—use sandboxes

> **Final Insight from Transcript**  
> > "Security isn't about perfect code—it's about making it *harder* for attackers than the value they'd gain. Focus on defense-in-depth: multiple layers of security, not just one."